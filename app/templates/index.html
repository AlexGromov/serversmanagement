{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block body %}

{# TODO: add more links #}
<h2>User info:</h2>

{{ g.user.name }} {{ g.user.email }}

<h2>Fast links:</h2>

<a href="/tasks/1">deploy mos env</a><br />
<a href="/tasks/2">clean mos env</a><br />

{% if run_list %}
	<h2>Your runs:</h2>
	<table border="1">
		
		<tr align="center">
			<td><b>#</b></td>
			<td><b>State</b></td>
			<td><b>Task</b></td>
			<td><b>Server</b></td>
			<td><b>Start date/time</b></td>
		</tr>
		
		{% for run in run_list %}
			
			{% if loop.index is divisibleby(2) %}
				<tr align="center">
			{% else %}
				<tr align="center" bgcolor="#D8D8D8">
			{% endif %}
				<td><a href="/runs/{{ run.id }}">#{{ run.id }}</a></td>
				<td>
					  {% if run.state == '0' %}
					    <font color="orange">in_queue</font>
					  {% elif run.state == '1' %}
					    in_progress<br>
					    <div id='loader'><img src="/static/ico/loader.gif"/></div>
					  {% elif run.state == '2' %}
						<font color="green">done</font>
					  {% elif run.state == '3' %}
					  	<font color="red">canceled</font>
					  {% else %}
						Error
					  {% endif %}
					</td>
				<td>{{ run.task.taskname }}</td>
				<td>
					{% if run.server.id %}
						{{ run.server.alias }}
					{% else %}
						-
					{% endif %}
				</td>
			
				<td>
					{{ run.start_datetime.strftime('%H:%M:%S %d.%m.%Y') }}
				</td>
	
			</tr>
		{% endfor %}
	</table>
{% endif%}

{% endblock %}
